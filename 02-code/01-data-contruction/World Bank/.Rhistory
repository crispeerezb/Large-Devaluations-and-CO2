###################################
# Data for Emissions and GDP PPPs #
###################################
# packages
library(readxl)
library(dplyr)
library(writexl)
library(tidyr)
library(ggplot2)
library(haven)
# options
rm(list = ls())
options(encoding = "UTF-8")
options(digits = 10)
# Set working directory
username <- "CP"
if (username == "EZ") {
dir_base <- "change where you clone the repository"
} else if (username == "CP") {
dir_base <- "C:/Users/crist/OneDrive/Documentos/GitHub/Large-Devaluations-and-CO2/"
}
dir_source <- file.path(dir_base, "01-raw-data")
wd <- file.path(dir_base, "02-code")
dir_temp <- file.path(dir_base, "03-temp")
dir_output <- file.path(dir_base, "04-output")
# load data
gdp_ppp <- read_excel(file.path(dir_source, "/World Bank/GDP PPPs.xlsx"), sheet = "Data", range = "A4:BP270")
co2_emissions <- read_excel(file.path(dir_source, "/World Bank/CO2 Emissions.xlsx"), sheet = "Data", range = "A4:BM270")
countries <- read_dta(file.path(dir_output, "/data-stata/00-countries.dta"))
countries <- read_dta(file.path(dir_output, "data-stata/00-countries.dta"))
countries <- read_dta(file.path(dir_output, "data-stata/00-countries.dta"))
countries <- read_dta(file.path(dir_output, "data-stata/00-countries.dta"))
paste0(dir_output, "/data-stata/00-countries.dta")
dir_output <- file.path(dir_base, "04-output")
###################################
# Data for Emissions and GDP PPPs #
###################################
# packages
library(readxl)
library(dplyr)
library(writexl)
library(tidyr)
library(ggplot2)
library(haven)
# options
rm(list = ls())
options(encoding = "UTF-8")
options(digits = 10)
# Set working directory
username <- "CP"
if (username == "EZ") {
dir_base <- "change where you clone the repository"
} else if (username == "CP") {
dir_base <- "C:/Users/crist/OneDrive/Documentos/GitHub/Large-Devaluations-and-CO2"
}
dir_source <- file.path(dir_base, "01-raw-data")
wd <- file.path(dir_base, "02-code")
dir_temp <- file.path(dir_base, "03-temp")
dir_output <- file.path(dir_base, "04-output")
countries <- read_dta(file.path(dir_output, "data-stata/00-countries.dta"))
# load data
gdp_ppp <- read_excel(file.path(dir_source, "/World Bank/GDP PPPs.xlsx"), sheet = "Data", range = "A4:BP270")
co2_emissions <- read_excel(file.path(dir_source, "/World Bank/CO2 Emissions.xlsx"), sheet = "Data", range = "A4:BM270")
countries <- read_dta(file.path(dir_output, "data-stata/00-countries.dta"))
###################################
# Data for Emissions and GDP PPPs #
###################################
# packages
library(readxl)
library(dplyr)
library(writexl)
library(tidyr)
library(ggplot2)
library(haven)
# options
rm(list = ls())
options(encoding = "UTF-8")
options(digits = 10)
# Set working directory
username <- "CP"
if (username == "EZ") {
dir_base <- "change where you clone the repository"
} else if (username == "CP") {
dir_base <- "C:/Users/crist/OneDrive/Documentos/GitHub/Large-Devaluations-and-CO2"
}
dir_source <- file.path(dir_base, "01-raw-data")
wd <- file.path(dir_base, "02-code")
dir_temp <- file.path(dir_base, "03-temp")
dir_output <- file.path(dir_base, "04-output")
# load data
gdp_ppp <- read_excel(file.path(dir_source, "/World Bank/GDP PPPs.xlsx"), sheet = "Data", range = "A4:BP270")
co2_emissions <- read_excel(file.path(dir_source, "/World Bank/CO2 Emissions.xlsx"), sheet = "Data", range = "A4:BM270")
countries <- read_dta(file.path(dir_output, "data-stata/eora/00-countries.dta"))
View(countries)
View(countries)
###################################
# Data for Emissions and GDP PPPs #
###################################
# packages
library(readxl)
library(dplyr)
library(writexl)
library(tidyr)
library(ggplot2)
library(haven)
# options
rm(list = ls())
options(encoding = "UTF-8")
options(digits = 10)
# Set working directory
username <- "CP"
if (username == "EZ") {
dir_base <- "change where you clone the repository"
} else if (username == "CP") {
dir_base <- "C:/Users/crist/OneDrive/Documentos/GitHub/Large-Devaluations-and-CO2"
}
dir_source <- file.path(dir_base, "01-raw-data")
wd <- file.path(dir_base, "02-code")
dir_temp <- file.path(dir_base, "03-temp")
dir_output <- file.path(dir_base, "04-output")
# load data
gdp_ppp <- read_excel(file.path(dir_source, "/World Bank/GDP PPPs.xlsx"), sheet = "Data", range = "A4:BP270")
co2_emissions <- read_excel(file.path(dir_source, "/World Bank/CO2 Emissions.xlsx"), sheet = "Data", range = "A4:BM270")
countries <- read_dta(file.path(dir_output, "data-stata/eora/00-countries.dta"))
# improve format: replace spaces in column names with "_"
names(gdp_ppp) <- gsub(" ", "_", names(gdp_ppp))
names(co2_emissions) <- gsub(" ", "_", names(co2_emissions))
# improve format: keep only relevant columns
gdp_ppp <- gdp_ppp %>% select(-Indicator_Code)
co2_emissions <- co2_emissions %>% select(-Indicator_Code)
# reshape data
gdp_ppp <- gdp_ppp %>%
pivot_longer(cols = -c(Country_Name, Country_Code, Indicator_Name), names_to = "Year", values_to = "GDP_PPP") %>%
mutate(GDP_PPP = as.numeric(GDP_PPP)) %>% select(-Indicator_Name)
co2_emissions <- co2_emissions %>%
pivot_longer(cols = -c(Country_Name, Country_Code, Indicator_Name), names_to = "Year", values_to = "CO2_Emissions") %>%
mutate(CO2_Emissions = as.numeric(CO2_Emissions)*1000000) %>% select(-Indicator_Name)
# just keep years from 1990-2019 (to avoid pandemic effects)
gdp_ppp <- gdp_ppp %>% filter(Year >= 1990 & Year <= 2019)
co2_emissions <- co2_emissions %>% filter(Year >= 1990 & Year <= 2019)
# merge data
data <- left_join(gdp_ppp, co2_emissions, by = c("Country_Name", "Country_Code", "Year"))
# add co2 rates
data$co2_rates <- data$CO2_Emissions/data$GDP_PPP
View(data)
View(data)
# then keep countries that are in the EORA dataset (by country code)
data <- data %>% filter(Country_Code %in% countries$country_code)
View(data)
length(unique(data$Country_Name))
###################################
# Data for Emissions and GDP PPPs #
###################################
# packages
library(readxl)
library(dplyr)
library(writexl)
library(tidyr)
library(ggplot2)
library(haven)
# options
rm(list = ls())
options(encoding = "UTF-8")
options(digits = 10)
# Set working directory
username <- "CP"
if (username == "EZ") {
dir_base <- "change where you clone the repository"
} else if (username == "CP") {
dir_base <- "C:/Users/crist/OneDrive/Documentos/GitHub/Large-Devaluations-and-CO2"
}
dir_source <- file.path(dir_base, "01-raw-data")
wd <- file.path(dir_base, "02-code")
dir_temp <- file.path(dir_base, "03-temp")
dir_output <- file.path(dir_base, "04-output")
# load data
gdp_ppp <- read_excel(file.path(dir_source, "/World Bank/GDP PPPs.xlsx"), sheet = "Data", range = "A4:BP270")
co2_emissions <- read_excel(file.path(dir_source, "/World Bank/CO2 Emissions.xlsx"), sheet = "Data", range = "A4:BM270")
countries <- read_dta(file.path(dir_output, "data-stata/eora/00-countries.dta"))
# improve format: replace spaces in column names with "_"
names(gdp_ppp) <- gsub(" ", "_", names(gdp_ppp))
names(co2_emissions) <- gsub(" ", "_", names(co2_emissions))
# improve format: keep only relevant columns
gdp_ppp <- gdp_ppp %>% select(-Indicator_Code)
co2_emissions <- co2_emissions %>% select(-Indicator_Code)
# reshape data
gdp_ppp <- gdp_ppp %>%
pivot_longer(cols = -c(Country_Name, Country_Code, Indicator_Name), names_to = "Year", values_to = "GDP_PPP") %>%
mutate(GDP_PPP = as.numeric(GDP_PPP)) %>% select(-Indicator_Name)
co2_emissions <- co2_emissions %>%
pivot_longer(cols = -c(Country_Name, Country_Code, Indicator_Name), names_to = "Year", values_to = "CO2_Emissions") %>%
mutate(CO2_Emissions = as.numeric(CO2_Emissions)*1000000) %>% select(-Indicator_Name)
# just keep years from 1990-2019 (to avoid pandemic effects)
gdp_ppp <- gdp_ppp %>% filter(Year >= 1990 & Year <= 2019)
co2_emissions <- co2_emissions %>% filter(Year >= 1990 & Year <= 2019)
# merge data
data <- left_join(gdp_ppp, co2_emissions, by = c("Country_Name", "Country_Code", "Year"))
# add co2 rates
data$co2_rates <- data$CO2_Emissions/data$GDP_PPP
# then keep countries that are in the EORA dataset (by country code)
data <- data %>% filter(Country_Code %in% countries$country_code)
# export as dta data
write_dta(data, file.path(dir_output, "/data-stata/world bank/01-emissions-rates.dta"))
# we will keep those countries that have data for the whole period
data <- data %>% group_by(Country_Name) %>% filter(n() == 30)
View(data)
###################################
# Data for Emissions and GDP PPPs #
###################################
# packages
library(readxl)
library(dplyr)
library(writexl)
library(tidyr)
library(ggplot2)
library(haven)
# options
rm(list = ls())
options(encoding = "UTF-8")
options(digits = 10)
# Set working directory
username <- "CP"
if (username == "EZ") {
dir_base <- "change where you clone the repository"
} else if (username == "CP") {
dir_base <- "C:/Users/crist/OneDrive/Documentos/GitHub/Large-Devaluations-and-CO2"
}
dir_source <- file.path(dir_base, "01-raw-data")
wd <- file.path(dir_base, "02-code")
dir_temp <- file.path(dir_base, "03-temp")
dir_output <- file.path(dir_base, "04-output")
# load data
gdp_ppp <- read_excel(file.path(dir_source, "/World Bank/GDP PPPs.xlsx"), sheet = "Data", range = "A4:BP270")
co2_emissions <- read_excel(file.path(dir_source, "/World Bank/CO2 Emissions.xlsx"), sheet = "Data", range = "A4:BM270")
countries <- read_dta(file.path(dir_output, "data-stata/eora/00-countries.dta"))
# improve format: replace spaces in column names with "_"
names(gdp_ppp) <- gsub(" ", "_", names(gdp_ppp))
names(co2_emissions) <- gsub(" ", "_", names(co2_emissions))
# improve format: keep only relevant columns
gdp_ppp <- gdp_ppp %>% select(-Indicator_Code)
co2_emissions <- co2_emissions %>% select(-Indicator_Code)
# reshape data
gdp_ppp <- gdp_ppp %>%
pivot_longer(cols = -c(Country_Name, Country_Code, Indicator_Name), names_to = "Year", values_to = "GDP_PPP") %>%
mutate(GDP_PPP = as.numeric(GDP_PPP)) %>% select(-Indicator_Name)
co2_emissions <- co2_emissions %>%
pivot_longer(cols = -c(Country_Name, Country_Code, Indicator_Name), names_to = "Year", values_to = "CO2_Emissions") %>%
mutate(CO2_Emissions = as.numeric(CO2_Emissions)*1000000) %>% select(-Indicator_Name)
# just keep years from 1990-2019 (to avoid pandemic effects)
gdp_ppp <- gdp_ppp %>% filter(Year >= 1990 & Year <= 2019)
co2_emissions <- co2_emissions %>% filter(Year >= 1990 & Year <= 2019)
# merge data
data <- left_join(gdp_ppp, co2_emissions, by = c("Country_Name", "Country_Code", "Year"))
# add co2 rates
data$co2_rates <- data$CO2_Emissions/data$GDP_PPP
# then keep countries that are in the EORA dataset (by country code)
data <- data %>% filter(Country_Code %in% countries$country_code)
View(data)
# we will keep those countries that have data from 1990 to 2019, if not, we will drop them
data <- data %>% group_by(Country_Name) %>% filter(n() == 30)
# plot evolution of CO2 rates for Indonesia (scatter plot with lines and a vertical line for 1998)
df_indonesia <- data %>%
filter(Country_Name == "Indonesia") %>%
mutate(Year = as.numeric(Year))
ggplot(df_indonesia, aes(x = Year, y = co2_rates)) +
geom_line() +
geom_point() +
geom_vline(xintercept = 1998, linetype = "dashed") +
labs(title = "CO2 Emissions as a share of GDP PPPs in Indonesia",
x = "Year",
y = "CO2 Emissions as a share of GDP PPPs") +
theme_minimal()
# plot evolution of CO2 rates for Brasil (scatter plot with lines and a vertical line for 1992, 1999 and 2015)
df_brasil <- data %>%
filter(Country_Name == "Brazil") %>%
mutate(Year = as.numeric(Year))
ggplot(df_brasil, aes(x = Year, y = co2_rates)) +
geom_line() +
geom_point() +
geom_vline(xintercept = c(1992, 1999, 2015), linetype = "dashed") +
labs(title = "CO2 Emissions as a share of GDP PPPs in Brazil",
x = "Year",
y = "CO2 Emissions as a share of GDP PPPs") +
theme_minimal()
# plot evolution of CO2 rates for Colombia (scatter plot with lines and a vertical line for 2014)
df_colombia <- data %>%
filter(Country_Name == "Colombia") %>%
mutate(Year = as.numeric(Year))
ggplot(df_colombia, aes(x = Year, y = co2_rates)) +
geom_line() +
geom_point() +
geom_vline(xintercept = 2014, linetype = "dashed") +
labs(title = "CO2 Emissions as a share of GDP PPPs in Colombia",
x = "Year",
y = "CO2 Emissions as a share of GDP PPPs") +
theme_minimal()
# plot evolution of CO2 rates for Korea (scatter plot with lines and a vertical line for 1998)
df_korea <- data %>%
filter(Country_Name == "Korea, Rep.") %>%
mutate(Year = as.numeric(Year))
ggplot(df_korea, aes(x = Year, y = co2_rates)) +
geom_line() +
geom_point() +
geom_vline(xintercept = 1998, linetype = "dashed") +
labs(title = "CO2 Emissions as a share of GDP PPPs in Korea",
x = "Year",
y = "CO2 Emissions as a share of GDP PPPs") +
theme_minimal()
# plot evolution of CO2 rates for Thailand (scatter plot with lines and a vertical line for 1998)
df_thailand <- data %>%
filter(Country_Name == "Thailand") %>%
mutate(Year = as.numeric(Year))
ggplot(df_thailand, aes(x = Year, y = co2_rates)) +
geom_line() +
geom_point() +
geom_vline(xintercept = 1998, linetype = "dashed") +
labs(title = "CO2 Emissions as a share of GDP PPPs in Thailand",
x = "Year",
y = "CO2 Emissions as a share of GDP PPPs") +
theme_minimal()
# plot evolution of CO2 rates for Mexico (scatter plot with lines and a vertical line for 1995)
df_mexico <- data %>%
filter(Country_Name == "Mexico") %>%
mutate(Year = as.numeric(Year))
ggplot(df_mexico, aes(x = Year, y = co2_rates)) +
geom_line() +
geom_point() +
geom_vline(xintercept = 1995, linetype = "dashed") +
labs(title = "CO2 Emissions as a share of GDP PPPs in Mexico",
x = "Year",
y = "CO2 Emissions as a share of GDP PPPs") +
theme_minimal()
# plot evolution of CO2 rates for Malaysa (scatter plot with lines and a vertical line for 1997)
df_malaysia <- data %>%
filter(Country_Name == "Malaysia") %>%
mutate(Year = as.numeric(Year))
ggplot(df_malaysia, aes(x = Year, y = co2_rates)) +
geom_line() +
geom_point() +
geom_vline(xintercept = 1997, linetype = "dashed") +
labs(title = "CO2 Emissions as a share of GDP PPPs in Malaysia",
x = "Year",
y = "CO2 Emissions as a share of GDP PPPs") +
theme_minimal()
###################################
# Data for Emissions and GDP PPPs #
###################################
# packages
library(readxl)
library(dplyr)
library(writexl)
library(tidyr)
library(ggplot2)
library(haven)
# options
rm(list = ls())
options(encoding = "UTF-8")
options(digits = 10)
# Set working directory
username <- "CP"
if (username == "EZ") {
dir_base <- "change where you clone the repository"
} else if (username == "CP") {
dir_base <- "C:/Users/crist/OneDrive/Documentos/GitHub/Large-Devaluations-and-CO2"
}
dir_source <- file.path(dir_base, "01-raw-data")
wd <- file.path(dir_base, "02-code")
dir_temp <- file.path(dir_base, "03-temp")
dir_output <- file.path(dir_base, "04-output")
# load data to get graphs
df_countries_co2_rates <- read_dta(file.path(dir_output, "/data-stata/world bank/01-emissions-rates.dta"))
View(df_countries_co2_rates)
