# remove everything from the workspace
rm(list=ls())
# load libraries
library(dplyr)
library(ggplot2)
library(tidyr)
library(haven)
library(gridExtra)
# set working directory
setwd("C:/Users/crist/OneDrive/Documentos/GitHub/Large-Devaluations-and-CO2/04-output/data-stata/eam")
# load data from stata format
data <- read_dta("08-EAM-2010-2019.dta")
View(data)
unique(ciiu)
unique(data$ciiu)
colnames(data)
# create a data set with emissions by year
emissions <- data %>%
select(year, co2_emission_ton) %>%
group_by(year) %>%
summarise(co2 = sum(co2_emission_ton))
View(emissions)
# create a data set with emissions by year
emissions <- data %>%
select(year, co2_emission_ton) %>%
group_by(year) %>%
summarise(co2_emission = sum(co2_emission_ton),
carbon_emission = sum(carbon_emission),
fossil_fuel_emission = sum(fossil_fuel_emission),
gas_emission = sum(gas_emission),
gross_output = sum(gross_output),
valorven = sum(valorven),
total_cost = sum(total_cost),
cost_energy = sum(cost_energy),
salpeyte = sum(salpeyte),
invebrta = sum(invebrta),
industrial_output = sum(industrial_output))
# create a data set with emissions by year
emissions <- data %>%
select(year, co2_emission_ton) %>%
group_by(year) %>%
summarise(co2_emission = sum(co2_emission_ton),
carbon_emission = sum(carbon_emission),
fossil_fuel_emission = sum(fossil_fuel_emission),
gas_emission = sum(gas_emission),
gross_output = sum(gross_output),
valorven = sum(valorven),
total_cost = sum(total_cost),
cost_energy = sum(cost_energy),
salpeyte = sum(salpeyte),
invebrta = sum(invebrta),
industrial_output = sum(industrial_output))
# create a data set with emissions by year
emissions <- data %>%
select(year, carbon_emission, fossil_fuel_emission, gas_emission, gross_output, valorven, total_cost, cost_energy, salpeyte, invebrta, industrial_output) %>%
group_by(year) %>%
summarise(co2_emission = sum(co2_emission_ton),
carbon_emission = sum(carbon_emission),
fossil_fuel_emission = sum(fossil_fuel_emission),
gas_emission = sum(gas_emission),
gross_output = sum(gross_output),
valorven = sum(valorven),
total_cost = sum(total_cost),
cost_energy = sum(cost_energy),
salpeyte = sum(salpeyte),
invebrta = sum(invebrta),
industrial_output = sum(industrial_output))
# create a data set with emissions by year
emissions <- data %>%
select(year, co2_emission_ton, carbon_emission, fossil_fuel_emission, gas_emission, gross_output, valorven, total_cost, cost_energy, salpeyte, invebrta, industrial_output) %>%
group_by(year) %>%
summarise(co2_emission = sum(co2_emission_ton),
carbon_emission = sum(carbon_emission),
fossil_fuel_emission = sum(fossil_fuel_emission),
gas_emission = sum(gas_emission),
gross_output = sum(gross_output),
valorven = sum(valorven),
total_cost = sum(total_cost),
cost_energy = sum(cost_energy),
salpeyte = sum(salpeyte),
invebrta = sum(invebrta),
industrial_output = sum(industrial_output))
View(emissions)
# create co2 rate
emissions$co2_rate <- emissions$co2_emission/emissions$gross_output
# see evolution in a graph
ggplot(emissions, aes(x = year, y = co2_rate)) +
geom_line() +
labs(title = "Evolution of CO2 emissions rate in the EAM sector",
x = "Year",
y = "CO2 emissions rate (ton CO2/USD)") +
theme_minimal()
View(emissions)
# check evolution of this rates over time in a nice graph
emissions %>%
gather(key = "variable", value = "value", -year) %>%
ggplot(aes(x = year, y = value, color = variable)) +
geom_line() +
labs(title = "Evolution of CO2 emissions rates over time",
x = "Year",
y = "CO2 emissions rate (kg per unit)") +
theme_minimal() +
theme(legend.position = "bottom")
# check evolution of co2_rate_gross_output, co2_rate_valorven and co2_rate_total_cost in a nice graph
emissions %>%
gather(key = "variable", value = "value", co2_rate_gross_output, co2_rate_valorven, co2_rate_total_cost) %>%
ggplot(aes(x = year, y = value, color = variable)) +
geom_line() +
labs(title = "Evolution of CO2 emissions rates in EAM",
x = "Year",
y = "CO2 emissions rate (kg per local currency)") +
theme_minimal()
# create co2 rate in kg per local currency
emissions$co2_rate_gross_output <- (emissions$co2_emission/emissions$gross_output)*1000
emissions$co2_rate_valorven <- (emissions$co2_emission/emissions$valorven)*1000
emissions$co2_rate_total_cost <- (emissions$co2_emission/emissions$total_cost)*1000
# check evolution of co2_rate_gross_output, co2_rate_valorven and co2_rate_total_cost in a nice graph
emissions %>%
gather(key = "variable", value = "value", co2_rate_gross_output, co2_rate_valorven, co2_rate_total_cost) %>%
ggplot(aes(x = year, y = value, color = variable)) +
geom_line() +
labs(title = "Evolution of CO2 emissions rates in EAM",
x = "Year",
y = "CO2 emissions rate (kg per local currency)") +
theme_minimal()
# check evolution of co2_rate_gross_output, co2_rate_valorven and co2_rate_total_cost in a nice graph
emissions %>%
gather(key = "variable", value = "value", co2_rate_gross_output, co2_rate_valorven, co2_rate_total_cost) %>%
ggplot(aes(x = year, y = value, color = variable)) +
geom_line(size = 1.2) +  # Aumenta el grosor de las líneas
geom_point(size = 2.5) +  # Agrega puntos en las líneas
labs(title = "Evolution of CO2 Emissions Rates in EAM",
x = "Year",
y = "CO2 Emissions Rate (kg per local currency)") +
scale_color_manual(values = c("co2_rate_gross_output" = "blue",
"co2_rate_valorven" = "green",
"co2_rate_total_cost" = "red"),
labels = c("Gross Output CO2 Rate",
"Valorven CO2 Rate",
"Total Cost CO2 Rate")) +  # Cambia las etiquetas de las variables
theme_minimal()
# define year as date
emissions$year <- as.Date(emissions$year)
# check evolution of co2_rate_gross_output, co2_rate_valorven and co2_rate_total_cost in a nice graph
emissions %>%
gather(key = "variable", value = "value", co2_rate_gross_output, co2_rate_valorven, co2_rate_total_cost) %>%
ggplot(aes(x = year, y = value, color = variable)) +
geom_line(size = 1.2) +  # Aumenta el grosor de las líneas
geom_point(size = 2.5) +  # Agrega puntos en las líneas
labs(title = "Evolution of CO2 Emissions Rates in EAM",
x = "Year",
y = "CO2 Emissions Rate (kg per local currency)") +
scale_color_manual(values = c("co2_rate_gross_output" = "blue",
"co2_rate_valorven" = "green",
"co2_rate_total_cost" = "red"),
labels = c("Gross Output CO2 Rate",
"Valorven CO2 Rate",
"Total Cost CO2 Rate")) +  # Cambia las etiquetas de las variables
theme_minimal()
source("~/GitHub/Large-Devaluations-and-CO2/02-code/02-descriptive statistics/EAM-evolution-emissions.R")
# remove everything from the workspace
rm(list=ls())
# load libraries
library(dplyr)
library(ggplot2)
library(tidyr)
library(haven)
library(gridExtra)
# set working directory
setwd("C:/Users/crist/OneDrive/Documentos/GitHub/Large-Devaluations-and-CO2/04-output/data-stata/eam")
# load data from stata format
data <- read_dta("08-EAM-2010-2019.dta")
# create a data set with emissions by year
emissions <- data %>%
select(year, co2_emission_ton, carbon_emission, fossil_fuel_emission, gas_emission, gross_output, valorven, total_cost, cost_energy, salpeyte, invebrta, industrial_output) %>%
group_by(year) %>%
summarise(co2_emission = sum(co2_emission_ton),
carbon_emission = sum(carbon_emission),
fossil_fuel_emission = sum(fossil_fuel_emission),
gas_emission = sum(gas_emission),
gross_output = sum(gross_output),
valorven = sum(valorven),
total_cost = sum(total_cost),
cost_energy = sum(cost_energy),
salpeyte = sum(salpeyte),
invebrta = sum(invebrta),
industrial_output = sum(industrial_output))
# create co2 rate in kg per local currency
emissions$co2_rate_gross_output <- (emissions$co2_emission/emissions$gross_output)*1000
emissions$co2_rate_valorven <- (emissions$co2_emission/emissions$valorven)*1000
emissions$co2_rate_total_cost <- (emissions$co2_emission/emissions$total_cost)*1000
# check evolution of co2_rate_gross_output, co2_rate_valorven and co2_rate_total_cost in a nice graph
emissions %>%
gather(key = "variable", value = "value", co2_rate_gross_output, co2_rate_valorven, co2_rate_total_cost) %>%
ggplot(aes(x = year, y = value, color = variable)) +
geom_line(size = 1.2) +  # Aumenta el grosor de las líneas
geom_point(size = 2.5) +  # Agrega puntos en las líneas
labs(title = "Evolution of CO2 Emissions Rates in EAM",
x = "Year",
y = "CO2 Emissions Rate (kg per local currency)") +
scale_x_date(date_labels = "%Y", date_breaks = "1 year") +
scale_color_manual(values = c("co2_rate_gross_output" = "blue",
"co2_rate_valorven" = "green",
"co2_rate_total_cost" = "red"),
labels = c("Gross Output CO2 Rate",
"Valorven CO2 Rate",
"Total Cost CO2 Rate")) +  # Cambia las etiquetas de las variables
theme_minimal()
# create a data set with emissions by year
emissions <- data %>%
select(year, co2_emission_ton, carbon_emission, fossil_fuel_emission, gas_emission, gross_output, valorven, total_cost, cost_energy, salpeyte, invebrta, industrial_output) %>%
group_by(year) %>%
summarise(co2_emission = sum(co2_emission_ton),
carbon_emission = sum(carbon_emission),
fossil_fuel_emission = sum(fossil_fuel_emission),
gas_emission = sum(gas_emission),
gross_output = sum(gross_output),
valorven = sum(valorven),
total_cost = sum(total_cost),
cost_energy = sum(cost_energy),
salpeyte = sum(salpeyte),
invebrta = sum(invebrta),
industrial_output = sum(industrial_output))
# define year as date
emissions <- emissions %>%
mutate(year = as.Date(paste0(year, "-01-01")))
# create co2 rate in kg per local currency
emissions$co2_rate_gross_output <- (emissions$co2_emission/emissions$gross_output)*1000
emissions$co2_rate_valorven <- (emissions$co2_emission/emissions$valorven)*1000
emissions$co2_rate_total_cost <- (emissions$co2_emission/emissions$total_cost)*1000
# check evolution of co2_rate_gross_output, co2_rate_valorven and co2_rate_total_cost in a nice graph
emissions %>%
gather(key = "variable", value = "value", co2_rate_gross_output, co2_rate_valorven, co2_rate_total_cost) %>%
ggplot(aes(x = year, y = value, color = variable)) +
geom_line(size = 1.2) +  # Aumenta el grosor de las líneas
geom_point(size = 2.5) +  # Agrega puntos en las líneas
labs(title = "Evolution of CO2 Emissions Rates in EAM",
x = "Year",
y = "CO2 Emissions Rate (kg per local currency)") +
scale_color_manual(values = c("co2_rate_gross_output" = "blue",
"co2_rate_valorven" = "green",
"co2_rate_total_cost" = "red"),
labels = c("Gross Output CO2 Rate",
"Valorven CO2 Rate",
"Total Cost CO2 Rate")) +  # Cambia las etiquetas de las variables
theme_minimal()
# now we check what happen with investment and employment
production_factor <- data %>% select(gross_output, valorven, total_cost, salpeyte, invebrta, industrial_output) %>%
group_by(year) %>%
summarise(gross_output = sum(gross_output),
valorven = sum(valorven),
total_cost = sum(total_cost),
cost_energy = sum(cost_energy),
salpeyte = sum(salpeyte),
invebrta = sum(invebrta),
industrial_output = sum(industrial_output))
# now we check what happen with investment and employment
production_factor <- data %>% select(year, gross_output, valorven, total_cost, salpeyte, invebrta, industrial_output) %>%
group_by(year) %>%
summarise(gross_output = sum(gross_output),
valorven = sum(valorven),
total_cost = sum(total_cost),
cost_energy = sum(cost_energy),
salpeyte = sum(salpeyte),
invebrta = sum(invebrta),
industrial_output = sum(industrial_output))
# now we check what happen with investment and employment
production_factor <- data %>% select(year, cost_energy, gross_output, valorven, total_cost, salpeyte, invebrta, industrial_output) %>%
group_by(year) %>%
summarise(gross_output = sum(gross_output),
valorven = sum(valorven),
total_cost = sum(total_cost),
cost_energy = sum(cost_energy),
salpeyte = sum(salpeyte),
invebrta = sum(invebrta),
industrial_output = sum(industrial_output))
